buildscript {
	repositories {
		mavenLocal()
		maven { url 'https://dl.bintray.com/opencaesar/ecore-tools' }
  		mavenCentral()
		jcenter()
	}
	dependencies {
		classpath 'org.xtext:xtext-gradle-plugin:2.0.8'
		classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.+'
		classpath 'io.opencaesar.ecore:ecore-bikeshed-gradle:+'
	}
}

subprojects {
	group = 'io.opencaesar.oml'
	version = rootProject.file('version.txt').text.trim()

	ext.versions = [
	    sprotty: '0.9.0',
	    
	    // from sprotty...
	    // https://github.com/eclipse/sprotty-server/releases
	    // https://github.com/eclipse/sprotty-server/blob/v0.9.0/gradle/versions.gradle
	    xtext: '2.22.0',
	    elk: '0.7.0',
	    guava: '21.0', // [14.0,28)',
	    gson: '2.8.2',
	    lsp4j: '0.9.0',
	    
	    // from xtext...
	    // See https://www.eclipse.org/Xtext/releasenotes.html#/releasenotes/2020/06/02/version-2-22-0
	    mwe2: '2.11.3',
	    
	    // how do we determine which version of xtext this depends on?
	    xcore: '1.14.0',
	    xcoreLib: '1.5.0',
	    ecoreXtext: '1.5.0',
	    codegen: '2.21.0',
	    codegenEcore: '2.23.0',
	    emfEcore: '2.23.0',
	    
	    junitJupiter: '5.1.0',
	    antlr: '2.1.1',
	    xmlResolver: '1.2'
	]

	repositories {
		mavenLocal()
  		mavenCentral()
		jcenter()
	}
	
	apply plugin: 'org.xtext.xtend'
	apply plugin: 'eclipse'
	apply plugin: 'idea'

	dependencies {
		compile platform("org.eclipse.xtext:xtext-dev-bom:${versions.xtext}")
	}

	apply from: "${rootDir}/gradle/source-layout.gradle"

	configurations.all {
		exclude group: 'asm'
	}
}
