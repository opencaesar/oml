ext.title = 'Oml Textual Language Test'
description = 'Test for Oml textual language'
task copySrc(type: Copy) {
    from 'src'
    into 'build/bikeshed'
}

task ecoreToBikeshed(type:io.opencaesar.ecore.bikeshed.Ecore2BikeshedTask, dependsOn: copySrc) {
	inputFolderPath = file('../io.opencaesar.oml/src/io/opencaesar/oml')
	outputFolderPath = file('build/bikeshed')
}

task generateDocs(dependsOn: ecoreToBikeshed) {
	doLast {
        if (org.gradle.internal.os.OperatingSystem.current().isWindows()) {
			exec { commandLine 'cmd', '/c', 'bikeshed', 'spec', 'build/bikeshed/index.bs' }
		} else {
			exec { commandLine 'bikeshed', 'spec', 'build/bikeshed/index.bs' }
		}
		copy {
            from '../io.opencaesar.oml/build/docs/javadoc'
            into 'build/bikeshed/javadoc'
        }   
	}
}

clean {
	delete 'build'
}
